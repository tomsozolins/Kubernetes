Prepare disks:
# parted /dev/vdX mklabel gpt unit TB mkpart primary 0% 100%
# mkfs.xfs /dev/vdX1
# mkdir -p /mnt/disk1
# mount /dev/vdX1 /mnt/disk1
# echo "/dev/vdX1 /mnt/disk1 xfs defaults 1 2" >> /etc/fstab
---
# dnf install -y iscsi-initiator-utils
# systemctl start iscsid
# systemctl enable iscsid

# dnf install -y nfs-utils

# helm repo add longhorn https://charts.longhorn.io
# helm repo update

# helm show values longhorn/longhorn > longhorn-values.yaml
# vi longhorn-values.yaml

persistence:
  defaultClass: true
  defaultClassReplicaCount: 2

# kubectl create namespace longhorn-system
# export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
# helm install longhorn longhorn/longhorn --values longhorn-values.yaml --namespace longhorn-system

# helm upgrade longhorn longhorn/longhorn --values longhorn-values.yaml --namespace longhorn-system

# kubectl -n longhorn-system get pod

---
# kubectl apply -f https://raw.githubusercontent.com/tomsozolins/Kubernetes/master/Longhorn/longhorn-single-replica.yaml

# helm upgrade longhorn longhorn/longhorn --values longhorn-values.yaml --namespace longhorn-system

# kubectl get configmap longhorn-storageclass -n longhorn-system -o json

---
Uninstall:

# helm uninstall longhorn longhorn/longhorn --namespace longhorn-system
